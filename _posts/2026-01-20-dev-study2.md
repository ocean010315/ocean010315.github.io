---
title: "[ADK 토이 프로젝트] 2. ERD 설계 및 프로젝트 환경 설정"
date: 2026-01-22 00:00:00 +09:00
categories: [개발 일지, 여행 플래너]
tags: [adk, full stack, 여행 플래너]
use_math: true
---

## 1. ERD 설계

초기 설정이므로 간단하게만 구상해보도록 하자.  
- `users`: 회원가입, 로그인, 마이페이지 등에 사용할 테이블
- `travels`: 사용자의 여행과 해당 여행의 취향을 저장하는 테이블
- `itineraries`: 해당 여행의 일정들을 저장하는 테이블

<div align="center">
<img src="../assets/img/ADK_toyproject/2_project_setting/erd.png" width="500">
</div>

erd diagram에는 [dbdiagram.io](https://dbdiagram.io/home)을 활용했고, 코드는 아래와 같이 작성했다.  

<details>
<summary>ERD diagram 코드</summary>

<pre><code>
Table users {
  id uuid [primary key]
  
  user_id varchar[50] [not null]
  password_hash varchar[255] [not null]

  name varchar[100] [not null]
  email varchar[255] [unique, not null]

  is_verified bool [default: False]
  created_at timestamp
  updated_at timestamp
}

Table travels {
  id uuid [primary key]
  user_id uuid [not null]

  session_id varchar[100] // Redis에 저장된 agent와의 대화
  // chat_summary text

  title varchar[255] [not null]
  destination varchar[100] [not null]
  start_date date [not null]
  end_date date [not null]

  preferences jsonb [not null]

  created_at timestamp
  updated_at timestamp
}

Table itineraries {
  id uuid [primary key]
  travel_id uuid [not null]
  day_num integer [not null]
  visit_order integar [not null]

  place_name varchar[255] [not null]
  place_id varchar[255]
  latitude decimal(10, 8)
  longitude decimal(10, 8)
  category varchar[50]

  memo text
}

Table chat_messages {
  id uuid [primary key]
  travel_id uuid [not null]
  
  role varchar[20] [not null] // users, assistant
  content text [not null]
  created_at timestamp
}

Ref: users.id < travels.user_id
Ref: itineraries.travel_id > travels.id
Ref: chat_messages.travel_id - travels.id
</code></pre>

</details>

